[gd_resource type="Shader" format=2]

[resource]
code = "shader_type canvas_item;

uniform vec4 u_color_key : hint_color;
uniform vec4 u_replacement_color : hint_color;

uniform vec4 u_color_key_2 : hint_color;
uniform vec4 u_replacement_color_2 : hint_color;

vec4 get_replaced_color(vec4 col, vec4 color_key, vec4 replacement_color) {
	vec4 d4 = abs(col - color_key);
	float d_1 = max(max(d4.r, d4.g), d4.b);
	if(d_1 < 0.01) {
		return replacement_color;
	}
	return col;
}

void fragment() {
	vec4 col = texture(TEXTURE, UV);
	col = get_replaced_color(col, u_color_key, u_replacement_color);
	col = get_replaced_color(col, u_color_key_2, u_replacement_color_2);

	COLOR = col;
}"
